import{_ as e,c as n,e as s,o as p}from"./app-BSRiWrsC.js";const i={};function h(d,a){return p(),n("div",null,a[0]||(a[0]=[s(`<h2 id="从零开始驱动bldc" tabindex="-1"><a class="header-anchor" href="#从零开始驱动bldc"><span>从零开始驱动BLDC</span></a></h2><h3 id="控制mos管通断驱动直流电机" tabindex="-1"><a class="header-anchor" href="#控制mos管通断驱动直流电机"><span>控制MOS管通断驱动直流电机</span></a></h3><h4 id="直流有刷电机" tabindex="-1"><a class="header-anchor" href="#直流有刷电机"><span>直流有刷电机</span></a></h4><p>电刷帮助电流换向使转子(线圈)一直按一个方向旋转，但电刷易磨损。</p><p>PWM控制有效电压从而控制转速，交换MOS上下管通断改变电流方向</p><p>PWM的占空比和频率</p><p>中心对齐PWM减少高频谐波能量</p><h4 id="直流无刷电机-bldc" tabindex="-1"><a class="header-anchor" href="#直流无刷电机-bldc"><span>直流无刷电机(BLDC)</span></a></h4><p>？根据什么确定定子是三组线圈的呢？</p><p>考虑撤掉换向器，让线圈变为定子，人为控制电流方向改变磁场方向-&gt;六步换向</p><p>三相正弦波控制 相差120度</p><p>三相电压和为定值 恒功率</p><h4 id="控制矢量合成" tabindex="-1"><a class="header-anchor" href="#控制矢量合成"><span>控制矢量合成</span></a></h4><p>SPWM</p><p>大小与幅值</p><h3 id="foc的动机" tabindex="-1"><a class="header-anchor" href="#foc的动机"><span>FOC的动机</span></a></h3><p>磁场定向控制（Field-Oriented Control，FOC）：使定子磁场垂直于转子磁场，此时转子有最大的转动力矩</p><p>定子电流可以解耦为励磁分量 id和转矩分量 iq</p><p><strong>按转子磁场定向</strong>，即保持转子磁链旋转矢量始终与dq坐标系下的d轴重合，q轴正交，并将id设置为0。此时转子旋转力矩最大，电流全部能量用于转子旋转。力矩正比于id大小。</p><h4 id="svpwm" tabindex="-1"><a class="header-anchor" href="#svpwm"><span>SVPWM</span></a></h4><p>SPWM的最大压差与电源轨的比值</p><p>叠加锯齿波（1/2mid(u_a, u_b, u_c)）</p><h3 id="foc控制" tabindex="-1"><a class="header-anchor" href="#foc控制"><span>FOC控制</span></a></h3><p>目标：获得三相电电压 限制条件：满足所需力矩</p><h4 id="克拉克变换" tabindex="-1"><a class="header-anchor" href="#克拉克变换"><span>克拉克变换</span></a></h4><p>二维空间矢量至多两不相关矢量</p><p>三相电相位差180度，明显是有相关性的，想办法分解为不相关的两个分量</p><p>i_a,i_b,i_c -&gt; i_alpha, i_beta(与定子固连)</p><p>三变量问题降维成两变量</p><h4 id="恒幅与恒功率克拉克变换" tabindex="-1"><a class="header-anchor" href="#恒幅与恒功率克拉克变换"><span>恒幅与恒功率克拉克变换</span></a></h4><h4 id="帕克变换" tabindex="-1"><a class="header-anchor" href="#帕克变换"><span>帕克变换</span></a></h4><p>i_alpha, i_beta -&gt; i_d, i_q（与转子固连）</p><p>电角度theta：两坐标系的夹角，或者说i_alpha与i_d的夹角，可通过磁编码器获得</p><p>旋转矩阵</p><h4 id="结论" tabindex="-1"><a class="header-anchor" href="#结论"><span>结论</span></a></h4><p>那控制流程就很显然了</p><p>i_q正比于力矩，所需力矩 -&gt; i_q, 节省能量和简便操作i_d = 0;</p><p>i_q, i_d, theta -&gt; i_alpha, i_beta -&gt; i_a, i_b, i_c -&gt; u_a, u_b, u_c -&gt; PWM占空比</p><h4 id="开环" tabindex="-1"><a class="header-anchor" href="#开环"><span>开环</span></a></h4><h5 id="速度环" tabindex="-1"><a class="header-anchor" href="#速度环"><span>速度环</span></a></h5><p>转速到电压</p><h4 id="pid闭环" tabindex="-1"><a class="header-anchor" href="#pid闭环"><span>PID闭环</span></a></h4><h5 id="位置环" tabindex="-1"><a class="header-anchor" href="#位置环"><span>位置环</span></a></h5><p>加磁编码器获取转子位置</p><h5 id="位置-速度环" tabindex="-1"><a class="header-anchor" href="#位置-速度环"><span>位置-速度环</span></a></h5><p>加计数器获得转子转速</p><p>或者根据磁编码器的位置输出计算速度</p><h5 id="位置-速度-电流环" tabindex="-1"><a class="header-anchor" href="#位置-速度-电流环"><span>位置-速度-电流环</span></a></h5><p>考虑到电感使电流滞后，按照预估力矩设置电压并不能使当前电流直接设置为预期电流</p><p>加电流传感器精确控制力矩</p><div class="language-C line-numbers-mode" data-highlighter="prismjs" data-ext="C" data-title="C"><pre><code><span class="line">// 代码实现思路</span>
<span class="line">函数1：机械角度到电角度 机械角度*转子磁铁SN极数对</span>
<span class="line">函数2：限制电角度为0-2pi 1.取模(负角度返回负值) 2.负角加2pi</span>
<span class="line">函数3：将设定电压钳位在电源轨之内</span>
<span class="line">函数4：设置相电压，输入参数u_q(力矩大小)，u_d(默认为0)，theta电角度</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,51)]))}const t=e(i,[["render",h]]),l=JSON.parse('{"path":"/blogs/Math/motorControl.html","title":"FOC和SVPWM的作用","lang":"en-US","frontmatter":{"title":"FOC和SVPWM的作用","date":"2025-03-31T00:00:00.000Z","tags":["motor","FOC","SVPWM"],"categories":["Math"]},"headers":[{"level":2,"title":"从零开始驱动BLDC","slug":"从零开始驱动bldc","link":"#从零开始驱动bldc","children":[{"level":3,"title":"控制MOS管通断驱动直流电机","slug":"控制mos管通断驱动直流电机","link":"#控制mos管通断驱动直流电机","children":[]},{"level":3,"title":"FOC的动机","slug":"foc的动机","link":"#foc的动机","children":[]},{"level":3,"title":"FOC控制","slug":"foc控制","link":"#foc控制","children":[]}]}],"git":{"createdTime":1744420073000,"updatedTime":1744420073000,"contributors":[{"name":"NewLearner4396","email":"NewLearner4396@users.noreply.github.com","commits":1}]},"filePathRelative":"blogs/Math/motorControl.md"}');export{t as comp,l as data};
